# 03. Environment

先上一张类图

[Alt 'EnvironmentUML'](https://github.com/PictureRespository/Java/blob/main/Spring/Environment/EnvironmentUML.png?raw=true)

从类图可以看出, Environment 的作用主要有 2 个
1. 环境 Profile 的支持
2. 属性解析

## 3.1 PropertyResolver

属性的解析接口, 主要是针对 String 的处理, 从接口的定义可以看出 PropertyResolver 定义的作用有  
1. 判断某个属性是否存在
2. 通过 key 获取对应的 value
3. 将字符串中的 ${...} 中的 key 替换成对应的 value



继承 PropertyResolver 的直接接口有 Environment 和 ConfigurablePropertyResolver, 前者追加了环境 Profile 的相关操作, 后者追加了属性更多的操作。

一般情况下, 只有激活的 Profile 下的组件/配置才会注册到 Spring 容器, 类似于 maven 中 profile。

ConfigurableEnvironment 是 2 个新接口的直接实现接口, 声明多几个批量相关的接口, 比如批量设置多个 Profile, 一次获取多个属性列表的 MutablePropertySources 对象等。

AbstractPropertyResolver 是 ConfigurablePropertyResolver 的抽象实现, 对大部分的 ConfigurablePropertyResolver 方法进行了实现。











