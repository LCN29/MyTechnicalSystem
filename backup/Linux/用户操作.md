# 用户操作

## 1. 查看用户和用户组的 id 
Linux 每个用户(Uid)和组(Gid)都有一个对应的 id。一个 Gid 可以包含多个 Uid。

作用：
>1. 一些程序可能需要UID/GID来运行
>2. 个人认为应该还有一个作用就是用来分类管理


**语法**  
id [选项][用户名称]

**选项**   
|参数| 参数说明 |
| :-: | :-: |
|-g或--group | 显示用户所属群组的ID|
|-G或--groups| 显示用户所属附加群组的ID|
|-n或--name| 显示用户，所属群组或附加群组的名称|
|-r或--real| 显示实际ID|
|-u或--user | 显示用户ID|


**例子**
```shell
id

# 结果
uid=0(root) gid=0(root) groups=0(root)
```
显示当前的用户 id 和所属组的 id 和附加群组的 id

```shell
id -g

# 结果
0
```
显示了当前用户(root)所属的群组 id


**[注]** 每个组 id 都可以在 /etc/group 里面找到对应的


## 2. 新建一个用户组

**语法**  
groupadd [选项][用户组名]

**选项**   
|参数| 参数说明 |
| :-: | :-: |
|-g或--group | 指定新建工作组的id |
|-K| 创建系统工作组，系统工作组的组ID小于500|
|-K| 覆盖配置文件 “/ect/login.defs” |
|-o | 允许添加组ID号不唯一的工作组|

**例子**
```shell
groupadd -g 344 mysql
```
创建一个 mysql 的用户组，指定了组 id 为 344 (如果不指定的话，有默认)   

此时在/etc/passwd文件中产生一个组ID（GID）是344的项目

## 3. 新建一个用户

useradd [选项][用户组名]

**选项**   
|参数| 参数说明 |
| :-: | :-: |
|-c | 加上备注文字, 备注文字会保存在passwd的备注栏位中 |
|-d| 指定用户登入时的启始目录|
|-D| 变更预设值 |
|-e | 指定帐号的有效期限|
| -f |指定在密码过期后多少天即关闭该帐号|
| -g | 指定用户所属的群组|
| -G | 指定用户所属的附加群组 |
|-m |自动建立用户的登入目录(会创建 /home/用户名 这个目录)|
|-M| 不要自动建立用户的登入目录|
| -n |  取消建立以用户名称为名的群组|
| -r | 建立系统帐号|
| -s | 指定用户登入后所使用的shell|
| -u | 指定用户id|

**例子**
```shell
useradd test –g sales jack –G company,employees -u 123
```
新建一个用户 test 指定她的 Uid 为 123， 加入主要组：sales, jack, 加入次要组：company, employees

**[注]**：用户建好后，可以通过 password 设定登录密码。

## 4. 删除组
groupdel [用户组名]

**例子**
```shell
groupdel mysql
```

## 5. 删除用户
userdel [选项] [用户名]

**选项**   
|参数| 参数说明 |
| :-: | :-: |
|-f | 强制删除用户，即使用户当前已登录 |
|-r| 删除用户的同时，删除与用户相关的所有文件|

**例子**
```shell
userdel -r mysql
```


## 几个文件

/etc/passwd

/etc/shadow

/etc/group

/etc/gshadow

都是和用户和用户组相关的文件



